---
title: "Процесс изменения конфигурации данных"
date: 2023-08-22
author: "aagorlan"
tags: ["ХД", "ШД", "НСИ"]
slug: "change_data_configuration"
description: "Реализация процесса изменения (проектирование - внесение изменений - тестирование - публикация) работы с данными"
---

{{< toc >}}

## Структура объектов

**Особенности объекта управления, влияющие на проектные решения по функции**
Обработчики проверки и выполнения действий фиксированные

**Входящие данные**
Отсутствуют

**Исходящие данные**
Отсутствуют

**Исполнитель**
Архитектор интеграций

**Описание реализуемых задач**
Создать общий модуль "ПроектированиеДанныхОбработчикиСервер" и описать в нем все процедуры для обработчиков. Входящими данными для обработки будет Объект контура, результатом Структура (Результат - Булево, Код ошибки - Строка, Описание ошибки - Строка)

## Начало работы с контуром

**Особенности объекта управления, влияющие на проектные решения по функции**
Процесс изменения настроек фиксированный

**Входящие данные**
Контур с типом "Разработка", переведенный в состояние "В работе"

**Исходящие данные**
Этап контура "Окружение" или "Регистрация" при ошибках в обработчиках регистрации

**Исполнитель**
Архитектор интеграций

**Описание реализуемых задач**
На странице этапа в карточке контура отображается индекс последнего коммита в ветке контура.

При переводе контура из состояния "Черновик" присваивается этап "Регистрация" и выполняются следующие обработчики:

1. Создание ветки репозитория (От ветки родителя создается новая ветка в соответствии с настройками контура)

## Выбор окружения

**Особенности объекта управления, влияющие на проектные решения по функции**
Процесс изменения настроек фиксированный

**Входящие данные**
Контур с активным или пройденным этапом "Окружение"

**Исходящие данные**
Этап контура "Функциональные требования" или "Окружение" при ошибках в обработчиках регистрации

**Исполнитель**
Архитектор интеграций, Архитектор ИС

**Описание реализуемых задач**
На странице этапа в карточке контура выводится информация об интеграциях и информационных системах, задействованных в этих интеграциях. Если текущий этап контура "Окружение", доступна кнопка "Добавить интеграцию"

При переводе контура из этапа "Окружение" присваивается этап "Функциональные требования" и выполняются следующие обработчики:

1. Проверка участия в контуре хотя бы одной интеграции

**Модель данных**\
Справочник "Интеграция в контуре" (новый)

Реквизиты:
>Контур\
>Интеграция

## Функциональные требования

**Особенности объекта управления, влияющие на проектные решения по функции**
Процесс изменения настроек фиксированный

**Входящие данные**
Контур с активным или пройденным этапом "Функциональные требования"

**Исходящие данные**
Этап контура "Архитектура" или "Функциональные требования" при ошибках в обработчиках регистрации

**Исполнитель**
Архитектор интеграций, Архитектор ИС

**Описание реализуемых задач**
На странице этапа в карточке контура выводится информация об интеграциях (ссылка для открытия интеграции), связанных с текущим контуром, для каждой интеграции показаны функциональные требования введенные для данного контура, схемы на PlantUML открываются для просмотра в отдельном окне.

При переводе контура из этапа "Функциональные требования" присваивается этап "Архитектура" и выполняются следующие обработчики:

1. Проверка заполнения всех полей функциональных требований для всех участвующих в контуре интеграций

**Модель данных**\
Справочник "Интеграция в контуре"

Реквизиты:
>(ФТ) Бизнес-цели - Строка\
>(ФТ) Описание текущего процесса - Строка\
>(ФТ) Описание целевого процесса - Строка\
>(ФТ) Схема целевого процесса (PlantUML) - Строка\
>(ФТ) Риски - Строка

Табличные части:
>(ФТ) Передаваемые данные
>>Группа данных - Строка\
>>Данные (представление) - Строка\
>>Описание (комментарий) - Строка\
>>Тип данных - Строка\
>>Обязательное - Булево

## Описание архитектуры

**Особенности объекта управления, влияющие на проектные решения по функции**
Процесс изменения настроек фиксированный

**Входящие данные**
Контур с активным или пройденным этапом "Архитектура"

**Исходящие данные**
Этап контура "Разработка" или "Архитектура" при ошибках в обработчиках регистрации

**Исполнитель**
Архитектор интеграций

**Описание реализуемых задач**
На странице этапа в карточке контура выводится разработанная схема интеграции, объекты схемы данных измененные в контуре, описание периодичности (событий запуска процесса интеграции), оценка рисков и возможные проблемы связанные с запуском интеграции, оценка соблюдений требований ИБ и общее влияние на бизнес-архитектуру.

При переводе контура из этапа "Архитектура" присваивается этап "Разработка" и выполняются следующие обработчики:

1. Проверка заполнения всех обязательных полей архитектуры для всех участвующих в контуре интеграций
2. Создание новой базы данных хранилища путем копирования базы хранилища тестового контура
3. Загрузка в базу данных хранилища текущей конфигурации контура

**Модель данных**\
Справочник "Интеграция в контуре"

Реквизиты:
>(А) Схема интеграции (PlantUML) - Строка\
>(А) Периодичность поступления пакетов - Строка\
>(А) Оценка проблем - Строка\
>(А) Оценка соблюдения требований ИБ - Строка\
>(А) Общее влияние на бизнес-архитектуру - Строка

Табличные части:\
(А) Оценка рисков
>Описание и принцип выявления - Строка\
>Вероятность возникновения - Строка\
>Критичность - Строка\
>Способ реагирования - Строка\
>Задействованные сотрудники - Строка

Справочник "Настройки объектов интеграции"

Реквизиты:
>Тип объекта (Перечисление Типы объектов интеграции)

## Разработка

**Особенности объекта управления, влияющие на проектные решения по функции**
Процесс изменения настроек фиксированный

**Входящие данные**
Контур с активным или пройденным этапом "Разработка"

**Исходящие данные**
Этап контура "Подготовка к публикации" или "Разработка" при ошибках в обработчиках регистрации

**Исполнитель**
Архитектор интеграций

**Описание реализуемых задач**
На странице этапа в карточке контура выводится разработанная схема интеграции, лог прошедших сообщений по текущему контуру. При выборе сообщения схема отображает актуальный маршрут прохождения пакетов по выбранному логу.

Отображается список информационных ресурсов, подключенных к текущему контуру.

При переводе контура из этапа "Разработка" присваивается этап "Подготовка публикации" и обработчики не выполняются.

## Подготовка публикации

**Особенности объекта управления, влияющие на проектные решения по функции**
Процесс изменения настроек фиксированный

**Входящие данные**
Контур с активным или пройденным этапом "Подготовка публикации"

**Исходящие данные**
Этап контура "Ожидание публикации" или "Подготовка публикации" при ошибках в обработчиках регистрации

**Исполнитель**
Архитектор интеграций

**Описание реализуемых задач**
На странице этапа в карточке контура выводится разработанная ПМИ. Отображается список информационных ресурсов и баз данных со статусом их участия в тестировании других контуров

Отображаются кнопки управления составлением ПМИ.

При переводе контура из этапа "Подготовка публикации" присваивается этап "Ожидание публикации" и обработчики не выполняются.

**Модель данных**\
Справочник "Контуры"

Табличные части:\
Программа и методика испытаний
>Тип сценария - Перечисление (Позитивный, Негативный)\
>Идентификатор сценария - Строка\
>Тип пакета - Строка\
>Отправитель - Справочник "Информационные ресурсы"
>Получатель - Справочник "Информационные ресурсы"
>Ожидаемый результат - Строка

## Ожидание публикации

**Особенности объекта управления, влияющие на проектные решения по функции**
Процесс изменения настроек фиксированный

**Входящие данные**
Контур с активным или пройденным этапом "Ожидание публикации"

**Исходящие данные**
Этап контура "Тестирование" или "Ожидание публикации" при ошибках в обработчиках регистрации

**Исполнитель**
Архитектор интеграций

**Описание реализуемых задач**
Отображается список информационных ресурсов тестового контура и баз данных со статусом их участия в тестировании других контуров

При переводе контура из этапа "Ожидание публикации" присваивается этап "Тестирование" и выполняются следующие обработчики:

1. Проверка других контуров разработки того же тестового контура, их этап не должен быть выше "Ожидание публикации"
2. Если индекс родителя ветки контура не совпадает с индексом тестового контура, выполняется перенос ветки контура на индекс тестового контура
3. Текущая ветка объединяется с веткой тестового контура
4. Настройки текущего контура переносятся в тестовый контур

## Тестирование

**Особенности объекта управления, влияющие на проектные решения по функции**
Процесс изменения настроек фиксированный

**Входящие данные**
Контур с активным или пройденным этапом "Тестирование"

**Исходящие данные**
Этап контура "Тестирование" или "Ожидание публикации" при ошибках в обработчиках регистрации

**Исполнитель**
Архитектор интеграций

**Описание реализуемых задач**
Отображается список логов обмена через тестовый контур прошедших за период тестирования

При переводе контура из этапа "Тестирование" присваивается этап "Публикация" и выполняются следующие обработчики:

1. Ветка тестового контура объединяется с веткой продуктового контура
2. Настройки тестового контура переносятся в продуктовый контур
3. При успешном выполнении предыдущих действий выполняется блокировка возврата на предыдущие статусы

## Публикация

**Особенности объекта управления, влияющие на проектные решения по функции**
Процесс изменения настроек фиксированный

**Входящие данные**
Контур с активным или пройденным этапом "Публикация"

**Исходящие данные**
Этап контура "Завершена" или "Публикация" при ошибках в обработчиках регистрации

**Исполнитель**
Архитектор интеграций

**Описание реализуемых задач**
Отображается информация о том что изменения опубликованы и необходимо завершить работу с контуром

При переводе контура из этапа "Публикация" присваивается этап "Завершена" и выполняются следующие обработчики:

1. Удаляется ветка текущего контура на Git
