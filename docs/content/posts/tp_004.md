---
title: "Управление базами данных"
date: 2023-08-22
author: "aagorlan"
tags: ["ХД", "НСИ"]
slug: "db_management"
description: "Реализация общей библиотеки работы с СУБД в рамках создания, изменения и удаления баз данных"
---

{{< toc >}}

## Общие объекты работы с хранилищем данных

**Особенности объекта управления, влияющие на проектные решения по функции**
Для универсального использования процедур работы с хранилищами любых типов необходим общий модуль с универсальными процедурами. Для разработки будет использована СУБД ArangoDB

**Входящие данные**
Отсутствуют

**Исходящие данные**
Набор универсальных процедур для работы с хранилищем

**Исполнитель**
Регламентное задание, Архитектор данных

**Описание реализуемых задач**
Добавить перечисление "ТипыСУБД", добавить значение "ArangoDB"
Создать обработку "ХДArangoDBСервер"
Создать общий модуль "ХранилищеДанныхСервер", в модуле создать процедуру определения модуля СУБД по значению перечисления "ТипыСУБД"
Создать справочник "Подключения к СУБД", пароль для доступа должен храниться в защищенном хранилище
Создать справочник "Базы данных хранилища"

**Модель данных**
Справочник "Подключения к СУБД" (новый)

Реквизиты
>Тип СУБД (Перечисление Типы СУБД)\
>Адрес сервера\
>Порт\
>Имя пользователя

Справочник "Базы данных хранилища" (новый)

Реквизиты
>Подключение (Справочник "Подключения к СУБД")\
>Идентификатор базы данных\
>Дата удаления

## Подключение к СУБД

**Особенности объекта управления, влияющие на проектные решения по функции**
Для разработки будет использована СУБД ArangoDB

**Входящие данные**
Ссылка справочник "Подключения к СУБД"

**Исходящие данные**
Объект обработки подключенный к СУБД

**Исполнитель**
Регламентное задание, Архитектор данных

**Описание реализуемых задач**
Экспортируемая процедура "ПодключитьСУБД" в модуле "ХранилищеДанныхСервер" по типу СУБД определяет обработку, создает объект обработки и выполняет экспортную процедуру модуля обработки "Подключить". В случае ошибки подключения возвращается структура с кодом ошибки и ее описанием.

## Создание новой базы в ХД

**Особенности объекта управления, влияющие на проектные решения по функции**
Для разработки будет использована СУБД ArangoDB

**Входящие данные**
Наименование базы данных, Объект обработки подключенный к СУБД

**Исходящие данные**
Ссылка на справочник "Базы данных хранилища" или структура ошибки выполнения

**Исполнитель**
Регламентное задание, Архитектор данных

**Описание реализуемых задач**
Для реализации должен быть определен экспортный метод "СоздатьБД" в модуле обработки подключения СУБД. Метод создает базу данных на СУБД, создает новый элемент справочника "Базы данных хранилища".

## Обновление конфигурации ХД по текущей схеме данных

**Особенности объекта управления, влияющие на проектные решения по функции**
Для разработки будет использована СУБД ArangoDB

**Входящие данные**
Ссылка на справочник "Базы данных хранилища", Справочник "Контуры"

**Исходящие данные**
Истина или структура ошибки выполнения

**Исполнитель**
Регламентное задание, Архитектор данных

**Описание реализуемых задач**
Для реализации должен быть определен экспортный метод "ОбновитьКонфигурациюПоКонтуру" в модуле обработки подключения СУБД. Проверяет структуру объектов БД, их свойств и создает отсутствующие.

## Удаление базы ХД

**Особенности объекта управления, влияющие на проектные решения по функции**
Для разработки будет использована СУБД ArangoDB

**Входящие данные**
Ссылка на справочник "Базы данных хранилища"

**Исходящие данные**
Истина или структура ошибки выполнения

**Исполнитель**
Регламентное задание, Архитектор данных

**Описание реализуемых задач**
Для реализации должен быть определен экспортный метод "УдалитьБД" в модуле обработки подключения СУБД. Удаляет базу данных, в переданном элементе справочника устанавливает дату удаления.
