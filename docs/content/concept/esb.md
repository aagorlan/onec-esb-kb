---
title: "Шина данных"
date: 2023-07-11
weight: 20
---

[Термины и определения]({{< ref "/terms" >}})

## Что такое шина данных

Корпоративная сервисная шина (ESB) – это программный архитектурный шаблон, поддерживающий обмен данными между разнородными приложениями в режиме реального времени. В крупных организациях есть несколько приложений, выполняющих необходимые функции с использованием различных моделей данных, протоколов и ограничений безопасности. ESB упрощает интеграцию приложений, выполняя такие операции, как преобразование данных, перевод протоколов, маршрутизация сообщений. Приложения передают соответствующие данные в ESB, а тот преобразует и пересылает их другим приложениям, которые в них нуждаются.

Основными компонентами, составляющими современную сервисную шину, являются:

- брокер сообщений — это высокопроизводительная магистраль для обмена сообщениями в унифицированном формате между приложениями в режиме реального времени;
- адаптеры — технологические адаптеры и адаптеры к бизнес-системам обеспечивают взаимодействие с приложениями в том формате, который для них приемлем, представляя информацию из этих сообщений в унифицированном формате, воспринимаемом брокером — чем больше различных адаптеров предоставляет та или иная интеграционная платформа, тем больше шансов, что для ее внедрения в вашей организации не потребуется дополнительных работ по созданию адаптеров, специфичных для ваших систем;
среда разработки интеграционных сценариев — чем проще и быстрее происходит разработка сценариев интеграции, тем меньше вложения средств в эту разработку, а следовательно, быстрее возврат от вложенных средств. Современная интеграционная шина предоставляет в распоряжение разработчика визуальные средства конструирования интеграционных сценариев, позволяющих в большинстве случаев обходиться без низко­уровневого кодирования;
- SOA-средства — следование принципам сервис-ориентированной архитектуры является безусловным стандартом для всех интеграционных решений типа «единая сервисная шина» (что понятно по его названию). Информационные системы рассматриваются здесь как поставщики и потребители сервисов, все опубликованные в шине сервисы помещаются в единый реестр с возможностью повторного использования и управления политиками, связанными с сервисами;
- различные инструменты контроля и управления (аудиты, протоколирование, централизованный мониторинг, контроль соблюдения соглашения об уровне услуг и т.д.).

> Использована информация с сайтов:\
<https://compress.ru/article.aspx?id=21413>
<https://aws.amazon.com/ru/what-is/enterprise-service-bus/>

## Реализация работы с шиной данных

Основой работы ШД является сущность интеграции, которая определяет движение и обработку информации внутри ЕСД. Конфигурация интеграции зависит от контура информационного обмена, у каждой интеграции может существовать своя настройка маршрута для каждого контура. Источники и получатели информации представлены не конкретными информационными ресурсами, а сущностями, которые для каждого контура могут иметь отдельные настройки подключения.

Представление информации внутри ЕСД сохраняется на всем маршруте движения в формате XML, соответствующем XDTO схеме, построенной на основе текущей модели данных.

Простейшими сервисными блоками любой интеграции являются:

- Адаптеры получения информации - получают информацию из ИС, конвертируют ее во внутренний формат ЕСД. Адаптеры разделяются на активные (постоянно ожидающие поступление информации из внешней системы) и пассивные (с заданной периодичностью выполняющие запрос для получения информации)
- Адаптеры отправки информации - передают полученный пакет данных ИС, при необходимости конвертируя его из внутреннего формата ЕСД
- Адаптер запроса дополнительной информации - выполняет запрос данных из ИС с целью получения дополнительной информации, необходимой для обработки исходного запроса
- Связи - определяют направление движения, условие передачи и правила преобразования информации между сервисными блоками ШД
- Объединение - объединение данных из нескольких источников
- Получение данных из ХД - выполняет запрос данных из ХД
- Запись данных в ХД - выполняет запрос записи данных и формирования версии данных

Выполнение RPC вызовов возможно только с источниками, поддерживающими формирование ответа с разрывом исходного соединения.

Все операции с данными внутри ШД записываются в лог интеграции, для каждого лога определяется степень успешности прохождения информации. Время хранения логов интеграций задается на уровне общей политики хранения логов или может быть уточнено для конкретной интеграции.

### Простейшая схема интеграции передачи информации через ШД

![Схема PlantUML]({{< param "PlantUML" >}}/plantuml/concept/2.puml)

Данные, полученные ЕДС передаются без изменений получателю информации.
